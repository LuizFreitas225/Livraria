  
<!DOCTYPE html>
<html lang="pt-br" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<h:head>
	<title>Livraria Evolution</title>
</h:head>
<h:body>
	<h1>Consulta de Livros</h1>
	                    
	<h:messages id="mensagemValidacao" style="color:red;margin:8px;" />
	
	
	

        <h:form styleClass="form" >


		<h:panelGrid id="filtro" colunms="3">
			<h:outputLabel value="Filtro:" styleClass="label" />
			<h:selectOneMenu value="#{consultaController.modo}"
				styleClass="input">
				<f:selectItems value="#{consultaController.listarModoDeBusca}" var="obj"
					itemLabel="#{obj.label}" />
			</h:selectOneMenu>
             
             <h:inputText value="#{consultaController.textoFiltro}"
				styleClass="input"/>
			<h:commandButton value="Filtrar" styleClass="button">
				
			</h:commandButton>
		</h:panelGrid>
	  </h:form>
		<br />
		<br />
		
  <h:form styleClass="form" id="formularioEnvio">
		<h:panelGroup id="pgDataTable">
			<h:dataTable styleClass="dataTable"
				value="#{consultaController.filtrar}" var="obj">

				<h:column>
					<f:facet name="header">Id</f:facet>
					<h:outputLabel value="#{obj.id}" />
				</h:column>
				<h:column>
					<f:facet name="header">Nome</f:facet>
					<h:outputLabel value="#{obj.nome}" />
				</h:column>

				<h:column>
					<f:facet name="header">Capa</f:facet>
					<h:outputLabel value="#{obj.capa.label}" />
				</h:column>
				
				

				<h:column>
					<f:facet name="header">Autor</f:facet>
					<h:outputLabel value="#{obj.autor}" />
				</h:column>

				<h:column>
					<f:facet name="header">Preço</f:facet>
					<h:outputLabel value="#{obj.preco}" />
				</h:column>
				<h:column>
					<f:facet name="header">Categoria</f:facet>
					<h:outputLabel value="#{obj.categoria.label}" />
				</h:column>
				<h:column>
					<f:facet name="header">Páginas</f:facet>
					<h:outputLabel value="#{obj.qtPaginas}" />
				</h:column>
				
					<h:column>
					<f:facet name="header">Publicação</f:facet>
					<h:outputLabel value="#{obj.dataPublicacao}" />
				</h:column>
               <h:column>
					<f:facet name="header">Estoque</f:facet>
					<h:outputLabel value="#{obj.estoque}" />
				</h:column>
				<h:column>
					<f:facet name="header">Opções</f:facet>
					<h:commandButton value="Editar" styleClass="button"  id="editar"
						action="#{consultaController.editar(obj)}">
						<f:ajax execute="editar"
							render="formularioEnvio:gridInputs  formularioEnvio:gridBtn mensagemValidacao" />
					</h:commandButton>

					<h:commandButton value="Excluir" styleClass="button" id="excluir"
						actionListener="#{consultaController.excluir(obj)}">
						<f:ajax execute="excluir"
							render="formularioEnvio:pgDataTable  mensagemValidacao" />
					</h:commandButton>
				</h:column>



			</h:dataTable>
		</h:panelGroup>
	  </h:form>
</h:body>
</html>